!function(t){const e=t.System;o(e);const r=e.constructor.prototype,n=e.constructor,s=function(){n.call(this),o(this)};let i;function o(t){t.registerRegistry=Object.create(null)}s.prototype=r,e.constructor=s;const c=r.register;r.register=function(t,e,r){if("string"!=typeof t)return c.apply(this,arguments);const n=[e,r];return this.registerRegistry[t]=n,i||(i=n,Promise.resolve().then(function(){i=null})),c.apply(this,arguments)};const l=r.resolve;r.resolve=function(t,e){try{return l.call(this,t,e)}catch(e){if(t in this.registerRegistry)return t;throw e}};const u=r.instantiate;r.instantiate=function(t,e,r){const n=this.registerRegistry[t];return n?(this.registerRegistry[t]=null,n):u.call(this,t,e,r)};const g=r.getRegister;r.getRegister=function(){const t=g.call(this),e=i||t;return i=null,e}}("undefined"!=typeof self?self:global);